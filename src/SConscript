# (c) 2008-2010 by Anton Korenyushkin

Import("env")

env.Command('init.js.h', 'init.js', '\
(echo "namespace\\n{\\nconst char INIT_JS[] = {";\
 xxd -i < $SOURCES;\
 echo "};\\n}";\
) > $TARGET')

common_sources = [
    'db.cc',
    'parser.cc',
    'translator.cc',
    'common.cc',
    'debug.cc',
    ]

js_sources = [
    'js.cc',
    'js-common.cc',
    'js-core.cc',
    'js-db.cc',
    'js-fs.cc',
    'js-binary.cc',
    'js-proxy.cc',
    'js-script.cc',
    'js-socket.cc',
    'js-http.cc',
    'js-git.cc',
    ]

common_objects, js_objects = [
    [env.Object(source) for source in sources]
    for sources in (common_sources, js_sources)]

Return('common_objects', 'js_objects')
